{% if user.id == sessionUser.id %}
<html>
    <head>
        <title>{{ title }} - AppDomain</title>
    </head>
    
    <body>
        <div class="topnav">
            <a href="/">Home</a>
            <a href="/users/{{ user.id }}">Profile</a>
            <a href="/users">Users</a>
            <a href="/sign_out">Sign-Out</a>
            <a href="/mail"> Send Test Email</a>&emsp;

            {% if sessionUser.usertype == 'administrator' %}
            Admin: 
            <a href="/users/expired_passwords">Expired Passwords</a>
            <a href="/add-user">Create User</a>
            {% endif %}
        </div>
        <h1>Edit data for {{ user.username }}:</h1>
        <form id="UserUpdatePasswordForm" action="" method="POST">
            <p>
                {{ form.currentPassword.label }}<br>
                {{ form.currentPassword(size=16) }}<br>
            </p>
            <p>
                {{ form.newPassword.label }}<br>
                {{ form.newPassword(size=16) }}<br>
            </p>
            <p>
                {{ form.newPasswordVerification.label }}<br>
                {{ form.newPasswordVerification(size=16) }}<br>
            </p>
            <p>{{ form.submit() }}</p>
        </form>
        <script type=text/javascript src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type=text/javascript src="../../../static/js/CheckPassword.js"></script>
        <script id = "UserCreationScript" data-search={{ api }}>
            // $.ajax({
            //     url: '{{ api }}/users/{{ user.id }}/test_new_password',
            //     type: "GET",
            //     dataType: "json",
            //     success: function(data){
            //         alert(JSON.stringify(data));
            //     } 
            // });

            $('#UserUpdatePasswordForm').submit(function(e){
                e.preventDefault();
                
                $.ajax({
                    url: '{{ api }}/users/{{ user.id }}/test_new_password',
                    type: 'post',
                    data:$('#UserUpdatePasswordForm').serialize(),
                    success: console.log('Hello!!')
                });
            });
        </script>
    </body>
</html>
{% else %}
    <html>You are not authorized to edit this user.</html>
{% endif %}