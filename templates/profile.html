{% extends 'base.html' %}

  {%block title%} {{title}} {%endblock%}

    {%block content%}
    <div class="container-fluid">
      <div class="row">
        <div class= "col" style="max-width: fit-content;">
          <h1 class="pt-2">{{ userData.username }}'s Profile</h1> 
          {% if canEdit %}
            <a href="{{ url }}/users/{{ userData.id }}/edit">Edit Profile</a></p>
          {% endif %}
          <div id='profileAvatar' style="border-style: solid; border-color:rgb(0, 0, 0); width: fit-content;">
            <img src={{ userData.avatarlink }} height="240">  
          </div>
          {% if userData.isActive.lower() == 'true' %}
            <p>Status: Active</p>
          {% elif userData.isActive.lower() == 'false' %}
            <p>Status: Inactive until {{ userData.reactivateUserDate }}</p>
          {% endif %}
          <p>{{ userData.firstname }} {{ userData.lastname }} <span>  </span> <a href="/user-mail" <span class="fas fa-envelope" data-toggle="tooltip" data-placement="right" title="Email User"> </span> </a>       </p>
          <p>{{ userData.email }}</p>
          <p>{{ userData.usertype }}</p>
        </div>
        <div class= "col" style="padding: 15px;">
          <table class="table table-striped table-bordered ledgerDataTable" style="width: 100%;">
            <thead>
                <tr>
                    <th colspan="12"> Account 12345678 Ledger</th>
                </tr>
                <tr>
                    <th>Transaction</th>
                    <th>Amount</th>
                    <th>Timestamp</th>
                </tr>
            </thead>

            <tbody>
            <!-- {% for account in accounts %}
                <tr>
                    <td> <a href="{{ url }}/accounts/{{ account.AccountNumber }}" > {{ account.AccountName}} </a> </td>
                    <td>{{ account.AccountNumber}}</td>
                    <td>{{ account.AccountDesc }}</td>
                </tr>
            {% endfor %} -->
            <tr>
              <td>Target</td>
              <td>$25.00</td>
              <td>blah</td>
            </tr>
            <tr>
              <td>Walmart</td>
              <td>$67.40</td>
              <td>blah</td>
            </tr>
            <tr>
              <td>Cool-Website.biz</td>
              <td>$456.42</td>
              <td>blah</td>
            </tr>
            <tr>
              <td>Gas</td>
              <td>blah</td>
              <td>blah</td>
            </tr>
            </tbody>

        </table>
        </div>
      </div>
    </div>
      


        <div class="container-fluid ml-1 mb-3 mt-3">
          <h3 class="pt-2">Accounts:</h1>
          <table class="table table-striped table-bordered mydatatable" style="width: 100%">
              <thead>
                  <tr>
                      <th colspan="6"> Account Details</th>
                      <th colspan="6"> Account Status</th>
                  </tr>
                  <tr>
                      <th>Name</th>
                      <th>Number</th>
                      <th>Description</th>
                      <th>Normal Side</th>
                      <th>Category</th>
                      <th>Subcategory</th>
                      <th>Balance</th>
                      <th>Creation Date</th>
                      <th>AccountOrder</th>
                      <th>Statement</th>
                      <th>Comment</th>
                      <th>Active Status</th>
                      
                  </tr>
              </thead>
  
              <tbody>
              {% for account in accounts %}
                  <tr>
                      <td> <a href="{{ url }}/accounts/{{ account.AccountNumber }}" > {{ account.AccountName}} </a> </td>
                      <td>{{ account.AccountNumber}}</td>
                      <td>{{ account.AccountDesc }}</td>
                      <td>{{ account.NormalSide }}</td>
                      <td>{{ account.Category }}</td>
                      <td>{{ account.subCategory }}</td>
                      <td>${{ account.Balance }}</td>
                      <td>{{ account.CreationDate }}</td>
                      <td>{{ account.AccountOrder }}</td>
                      <td>{{ account.Comment }}</td>
                      <td>{{ account.Comment }}</td>
                      <td>{{ account.IsActive }}</td>
                  </tr>
              {% endfor %}
              </tbody>

          </table>
        </div>

    {%endblock%}

    {%block script%}

    <script>
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
    </script>

  <script>
    $('.mydatatable').DataTable({
        order: [[3,'desc']],
        pagingType: 'full_numbers',
    });
    $('.ledgerDataTable').DataTable({
        order: [[2,'desc']],
        scrollY: "300px",
        scrollCollapse: true,
        paging: false,
        "columnDefs": [
          { "width": "65%", "targets": 0 },
        ]
    });
  </script>

    {%endblock%}